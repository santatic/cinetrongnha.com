PageModuleAdministrator.prototype=new Module;PageModuleAdministrator.prototype.constructor=PageModuleAdministrator;function PageModuleAdministrator(a){Module.call(this,a);$.extend(this.setting,{header:!0})}
PageModuleAdministrator.prototype.Init=function(a){Module.prototype.Init.call(this,a);var c=this;a=$.parseJSON(Base64.decode(c.form.attr("module-json")));console.debug(a);var d=c.form.find(".admin-selector");a.page&&$.each(a.page,function(a,b){$('<option type="page" value='+Base64.encode(JSON.stringify(b))+">Page : "+b.name+" ( "+b._id.$oid+" )</option>").appendTo(d)});$("<option>-------------------</option>").appendTo(d);a.module&&$.each(a.module,function(a,b){$('<option type="module" value='+Base64.encode(JSON.stringify(b))+
">Module : "+b.name+" ( "+b._id.$oid+" )</option>").appendTo(d)});c.form.on("change",".admin-selector",function(a){try{var b=$.parseJSON(Base64.decode($(this).val()))}catch(d){b=""}c.form.find("textarea[name=admin-json]").val(js_beautify(JSON.stringify(b)))});c.form.on("click",".btn.admin-update",function(a){a=c.form.find(".admin-selector option:selected").attr("type");if("module"==a||"page"==a){var b=c.form.find("textarea[name=admin-json]").val(),b=JSON.stringify($.parseJSON(b));c.Load({query:{action:"update",
type:a,json:b},callback:function(a){}})}})};
