var PageModuleBlogImgBuild=function(f){this.app=f;this.setting={"class":{},trigger:{},like:!0,comment:!0,toolbar:"affix",meme:"/535b571f72fe08430822ed26/static/builder/meme/04c5a17257f94e6587835dd58c9346a6.jpg /535b571f72fe08430822ed26/static/builder/meme/8da7d3f38679430e805535c4c8008590.jpg /535b571f72fe08430822ed26/static/builder/meme/08d5dc02add145e59e72b73798d6cdf1.jpg /535b571f72fe08430822ed26/static/builder/meme/95a1641ff1c94de4bfdbc898224ed482.jpg /535b571f72fe08430822ed26/static/builder/meme/0a159d9a334e49b8b76adaf76bbc2ca1.jpg /535b571f72fe08430822ed26/static/builder/meme/964a4b8af4184824ac19db3d1c58e81a.jpg /535b571f72fe08430822ed26/static/builder/meme/0e7f35274b234043ba5b5d1296cd7f59.jpg /535b571f72fe08430822ed26/static/builder/meme/9edd7942a2c04b2eb3f1a1eea92b123d.jpg /535b571f72fe08430822ed26/static/builder/meme/9f7ba8c5ec9d47969b793b5d4778344c.jpg /535b571f72fe08430822ed26/static/builder/meme/221938e1b89349adb92f65df00e6dc7b.jpg /535b571f72fe08430822ed26/static/builder/meme/a2798c22f06945d484f7226d6abad2d2.jpg /535b571f72fe08430822ed26/static/builder/meme/22b6f211751b47ff9c0ca4e6365d2e6f.jpg /535b571f72fe08430822ed26/static/builder/meme/a2f15903d5164dec83683bc8798e3d1f.jpg /535b571f72fe08430822ed26/static/builder/meme/45d6c607ca904770960bfab91ab57dd2.jpg /535b571f72fe08430822ed26/static/builder/meme/c16bc298d31847b98a3287335145f312.jpg /535b571f72fe08430822ed26/static/builder/meme/49618290f8054cbcbb6d980114680e59.jpg /535b571f72fe08430822ed26/static/builder/meme/cddcd79d4cbb42f5ace62620f8da6c67.jpg /535b571f72fe08430822ed26/static/builder/meme/544c854359094c9c9893cf14c28d4608.jpg /535b571f72fe08430822ed26/static/builder/meme/d000b5be409e45698a099fe1e002f5bd.jpg /535b571f72fe08430822ed26/static/builder/meme/563394609e1a4cf09973cdc97aaa1fe0.jpg /535b571f72fe08430822ed26/static/builder/meme/d527c7c107954152b1c481927f4ba4b8.jpg /535b571f72fe08430822ed26/static/builder/meme/56ecbb3ce4ad4ebba2999bf1704ba515.jpg /535b571f72fe08430822ed26/static/builder/meme/da540c96686542b99da59c4b61052f61.jpg /535b571f72fe08430822ed26/static/builder/meme/5867810879f84f69a0c66c75f14a044e.jpg /535b571f72fe08430822ed26/static/builder/meme/de84719cc5294c4599cce47833598739.jpg /535b571f72fe08430822ed26/static/builder/meme/5f96eba60dfc45a1a0ce93060abe71b4.jpg /535b571f72fe08430822ed26/static/builder/meme/df443eceea9745cdab916f8017899082.jpg /535b571f72fe08430822ed26/static/builder/meme/61fd223b4b1a4efeabf191234e680348.jpg /535b571f72fe08430822ed26/static/builder/meme/e554e140909d49fea9c951ad207f5ea1.jpg /535b571f72fe08430822ed26/static/builder/meme/67bc5b5fd9624341b341409c02e0701b.jpg /535b571f72fe08430822ed26/static/builder/meme/ee3458d1a560488d9757549b4ce42519.jpg /535b571f72fe08430822ed26/static/builder/meme/7ce7d509ccb64002abb0e7b07be65a92.jpg /535b571f72fe08430822ed26/static/builder/meme/f614ed77962d44ce948bbb85a844cd56.jpg /535b571f72fe08430822ed26/static/builder/meme/89938c1611834013a08a0ea643f4f921.jpg".split(" "),
other:["/535b571f72fe08430822ed26/static/builder/other/1.jpg","/535b571f72fe08430822ed26/static/builder/other/2.jpg"]};this.template={}};
PageModuleBlogImgBuild.prototype={Description:function(){return this.descript=$("<h3>module PageModuleBlogImgBuild</3></h4>module duoc dung de show cac bai post, anh, duong dan den cac bai post ...</h4>")},Init:function(f){if("undefined"==typeof this.inited)this.inited=!0;else return!0;var n=this;this.form=f;f=JSON.parse(Base64.decode(this.form.attr("module-setting")));for(var r in f)this.setting[r]=f[r];n.form.on("click",".lib-img .content",function(){var f=$('<div class="image-list"></div>').on("click",
"img",function(h){h=$(this);n.form.find(".builder .background").html("").append($("<img/>").attr("src",h.attr("src")));n.modal.modal("hide")}),r;r=$(this).hasClass("meme")?n.setting.meme:n.setting.other;void 0!=r&&$.each(r,function(h,n){$("<img>").attr("src",n).appendTo(f)});n.modal_title.html("List Image");n.modal_body.html(f);n.modal_footer.html("");n.modal.modal("show");event.preventDefault();event.stopPropagation()});n.form.on("change",".lib-img input.computer",function(f){for(var r=f.target.files,
h=0,D;D=r[h];h++)if(D.type.match("image.*")){var d=new FileReader;d.onload=function(d){return function(d){n.form.find(".builder .background").html("").append($('<img src="'+d.target.result+'">'))}}(D);d.readAsDataURL(D)}f.preventDefault();f.stopPropagation()});n.form.on("change",".lib-img input.internet",function(f){n.form.find(".builder .background").html("").append($('<img src="'+$(this).val()+'">'));f.preventDefault();f.stopPropagation()});n.text_size_obj=n.form.find(".post .text-size:first").bind("change",
function(f){f=n.form.find(".builder .user-text .text.focus");0<f.length&&f.children(".text-content").css({"font-size":$(this).val()+"px"})});n.text_color_obj=n.form.find(".post .text-color:first").bind("change",function(f){f=n.form.find(".builder .user-text .text.focus");0<f.length&&f.children(".text-content").css({color:$(this).val()})});n.text_content_obj=n.form.find(".post .text-content:first").bind("keyup",function(f){f=n.form.find(".builder .user-text .text.focus");var r=$(this).val().replace("\n",
"<br/>");0<f.length&&f.children(".text-content").html(r)});var L=1,M=n.form.find(".builder .user-text");M.on("click",".text",function(f){n.FocusText($(this))});n.form.on("click",".post .text-add",function(f){f=n.text_size_obj.val();var r=n.text_color_obj.val(),h=$('<div class="text"><div class="text-content">th\u00eam n\u1ed9i dung</div></div>').appendTo(M);h.css({"z-index":L++}).children(".text-content").css({"font-size":f+"px",color:r});h.drags();n.FocusText(h)});n.form.find(".post .text-add").click();
n.form.on("click",".finish-img",function(f){n.FocusText();f=n.form.find(".builder");html2canvas([f[0]],{onrendered:function(f){f=f.toDataURL("img/png");n.modal_title.html("Xem \u1ea2nh");n.modal_body.html('<div style="text-align:center;"><img src="'+f+'"/></div>');n.modal_footer.html('<a href="'+f+'" download="anhche.png" type="button" class="btn btn-danger">T\u1ea3i v\u1ec1</a>\t\t\t\t\t\t\t\t\t\t\t<button type="button" class="btn btn-default btn-close" data-dismiss="modal">Close</button>');n.modal.modal("show")}})});
this.modal=$('<div class="modal fade"role="dialog" aria-hidden="true">\t\t\t\t\t\t\t<div class="modal-dialog modal-lg">\t\t\t\t\t\t\t\t<div class="modal-content">\t\t\t\t\t\t\t\t\t<div class="modal-header">\t\t\t\t\t\t\t\t\t\t<button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>\t\t\t\t\t\t\t\t\t\t<h4 class="modal-title"></h4>\t\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\t\t<div class="modal-body"></div>\t\t\t\t\t\t\t\t\t<div class="modal-footer"></div>\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t</div>\t\t\t\t\t\t</div>').modal({show:!1}).appendTo(n.form);
this.modal_title=this.modal.find(".modal-title:first");this.modal_body=this.modal.find(".modal-body:first");this.modal_footer=this.modal.find(".modal-footer:first")},FocusText:function(f){this.form.find(".builder .user-text").children().removeClass("focus");void 0!=f&&(f.addClass("focus"),f=f.children(".text-content"),this.text_size_obj.val(parseInt(f.css("font-size"))),this.text_color_obj.val(f.css("color")),this.text_content_obj.val(f.html()))},Refesh:function(){}};
(function(f,n,r){function L(d,c,b){var g=d.runtimeStyle&&d.runtimeStyle[c],k,p=d.style;!/^-?[0-9]+\.?[0-9]*(?:px)?$/i.test(b)&&/^-?\d/.test(b)&&(k=p.left,g&&(d.runtimeStyle.left=d.currentStyle.left),p.left="fontSize"===c?"1em":b||0,b=p.pixelLeft+"px",p.left=k,g&&(d.runtimeStyle.left=g));return/^(thin|medium|thick)$/i.test(b)?b:Math.round(parseFloat(b))+"px"}function M(d){return parseInt(d,10)}function N(d,c,b,g,k,p){c=h.Util.getCSS(c,d,k);var a;1===c.length&&(k=c[0],c=[],c[0]=k,c[1]=k);-1!==c[0].toString().indexOf("%")?
(a=parseFloat(c[0])/100,k=b.width*a,"backgroundSize"!==d&&(k-=(p||g).width*a)):k="backgroundSize"===d?"auto"===c[0]?g.width:/contain|cover/.test(c[0])?h.Util.resizeBounds(g.width,g.height,b.width,b.height,c[0]).width:parseInt(c[0],10):parseInt(c[0],10);"auto"===c[1]?b=k/g.width*g.height:-1!==c[1].toString().indexOf("%")?(a=parseFloat(c[1])/100,b=b.height*a,"backgroundSize"!==d&&(b-=(p||g).height*a)):b=parseInt(c[1],10);return[k,b]}function Y(d,c){var b=[];return{storage:b,width:d,height:c,clip:function(){b.push({type:"function",
name:"clip",arguments:arguments})},translate:function(){b.push({type:"function",name:"translate",arguments:arguments})},fill:function(){b.push({type:"function",name:"fill",arguments:arguments})},save:function(){b.push({type:"function",name:"save",arguments:arguments})},restore:function(){b.push({type:"function",name:"restore",arguments:arguments})},fillRect:function(){b.push({type:"function",name:"fillRect",arguments:arguments})},createPattern:function(){b.push({type:"function",name:"createPattern",
arguments:arguments})},drawShape:function(){var d=[];b.push({type:"function",name:"drawShape",arguments:d});return{moveTo:function(){d.push({name:"moveTo",arguments:arguments})},lineTo:function(){d.push({name:"lineTo",arguments:arguments})},arcTo:function(){d.push({name:"arcTo",arguments:arguments})},bezierCurveTo:function(){d.push({name:"bezierCurveTo",arguments:arguments})},quadraticCurveTo:function(){d.push({name:"quadraticCurveTo",arguments:arguments})}}},drawImage:function(){b.push({type:"function",
name:"drawImage",arguments:arguments})},fillText:function(){b.push({type:"function",name:"fillText",arguments:arguments})},setVariable:function(d,c){b.push({type:"variable",name:d,arguments:c});return c}}}var h={},D;h.Util={};h.Util.log=function(d){h.logging&&f.console&&f.console.log&&f.console.log(d)};h.Util.trimText=function(d){return function(c){return d?d.apply(c):((c||"")+"").replace(/^\s+|\s+$/g,"")}}(String.prototype.trim);h.Util.asFloat=function(d){return parseFloat(d)};(function(){var d=
/((rgba|rgb)\([^\)]+\)(\s-?\d+px){0,})/g,c=/(-?\d+px)|(#.+)|(rgb\(.+\))|(rgba\(.+\))/g;h.Util.parseTextShadows=function(b){if(!b||"none"===b)return[];b=b.match(d);for(var g=[],k=0;b&&k<b.length;k++){var p=b[k].match(c);g.push({color:p[0],offsetX:p[1]?p[1].replace("px",""):0,offsetY:p[2]?p[2].replace("px",""):0,blur:p[3]?p[3].replace("px",""):0})}return g}})();h.Util.parseBackgroundImage=function(d){var c,b,g,k,p,a=[],v,e=0,q=0,f,h,l=function(){c&&('"'===b.substr(0,1)&&(b=b.substr(1,b.length-2)),b&&
h.push(b),"-"===c.substr(0,1)&&0<(k=c.indexOf("-",1)+1)&&(g=c.substr(0,k),c=c.substr(k)),a.push({prefix:g,method:c.toLowerCase(),value:p,args:h}));h=[];c=g=b=p=""};l();for(var n=0,r=d.length;n<r;n++)if(v=d[n],!(0===e&&-1<" \r\n\t".indexOf(v))){switch(v){case '"':f?f===v&&(f=null):f=v;break;case "(":if(f)break;else if(0===e){e=1;p+=v;continue}else q++;break;case ")":if(f)break;else if(1===e)if(0===q){e=0;p+=v;l();continue}else q--;break;case ",":if(!f)if(0===e){l();continue}else if(1===e&&0===q&&!c.match(/^url$/i)){h.push(b);
b="";p+=v;continue}}p+=v;0===e?c+=v:b+=v}l();return a};h.Util.Bounds=function(d){var c,b={};d.getBoundingClientRect&&(c=d.getBoundingClientRect(),b.top=c.top,b.bottom=c.bottom||c.top+c.height,b.left=c.left,b.width=d.offsetWidth,b.height=d.offsetHeight);return b};h.Util.OffsetBounds=function(d){var c=d.offsetParent?h.Util.OffsetBounds(d.offsetParent):{top:0,left:0};return{top:d.offsetTop+c.top,bottom:d.offsetTop+d.offsetHeight+c.top,left:d.offsetLeft+c.left,width:d.offsetWidth,height:d.offsetHeight}};
h.Util.getCSS=function(d,c,b){void 0!==d&&(D=n.defaultView.getComputedStyle(d,null));var g=D[c];if(/^background(Size|Position)$/.test(c)){a:{g=(g||"").split(",");g=g[b||0]||g[0]||"auto";g=h.Util.trimText(g).split(" ");if("backgroundSize"!==c||g[0]&&!g[0].match(/cover|contain|auto/)){g[0]=-1===g[0].indexOf("%")?L(d,c+"X",g[0]):g[0];if(g[1]===r)if("backgroundSize"===c){g[1]="auto";d=g;break a}else g[1]=g[0];g[1]=-1===g[1].indexOf("%")?L(d,c+"Y",g[1]):g[1]}d=g}return d}return/border(Top|Bottom)(Left|Right)Radius/.test(c)?
(d=g.split(" "),1>=d.length&&(d[1]=d[0]),d.map(M)):g};h.Util.resizeBounds=function(d,c,b,g,k){d/=c;k&&"auto"!==k?b/g<d^"contain"===k?(b=g,k=g*d):(k=b,b/=d):(k=b,b=g);return{width:k,height:b}};h.Util.BackgroundPosition=function(d,c,b,g,k){d=N("backgroundPosition",d,c,b,g,k);return{left:d[0],top:d[1]}};h.Util.BackgroundSize=function(d,c,b,g){d=N("backgroundSize",d,c,b,g);return{width:d[0],height:d[1]}};h.Util.Extend=function(d,c){for(var b in d)d.hasOwnProperty(b)&&(c[b]=d[b]);return c};h.Util.Children=
function(d){var c;try{var b;if(d.nodeName&&"IFRAME"===d.nodeName.toUpperCase())b=d.contentDocument||d.contentWindow.document;else{var g=d.childNodes;d=[];if(null!==g){var k=d.length,p=0;if("number"===typeof g.length)for(var a=g.length;p<a;p++)d[k++]=g[p];else for(;g[p]!==r;)d[k++]=g[p++];d.length=k}b=d}c=b}catch(v){h.Util.log("html2canvas.Util.Children failed with exception: "+v.message),c=[]}return c};h.Util.isTransparent=function(d){return"transparent"===d||"rgba(0, 0, 0, 0)"===d};h.Util.Font=function(){var d=
{};return function(c,b,g){if(d[c+"-"+b]!==r)return d[c+"-"+b];var k=g.createElement("div"),p=g.createElement("img"),a=g.createElement("span"),v;k.style.visibility="hidden";k.style.fontFamily=c;k.style.fontSize=b;k.style.margin=0;k.style.padding=0;g.body.appendChild(k);p.src="data:image/gif;base64,R0lGODlhAQABAIABAP///wAAACwAAAAAAQABAAACAkQBADs=";p.width=1;p.height=1;p.style.margin=0;p.style.padding=0;p.style.verticalAlign="baseline";a.style.fontFamily=c;a.style.fontSize=b;a.style.margin=0;a.style.padding=
0;a.appendChild(g.createTextNode("Hidden Text"));k.appendChild(a);k.appendChild(p);v=p.offsetTop-a.offsetTop+1;k.removeChild(a);k.appendChild(g.createTextNode("Hidden Text"));k.style.lineHeight="normal";p.style.verticalAlign="super";p={baseline:v,lineWidth:1,middle:p.offsetTop-k.offsetTop+1};d[c+"-"+b]=p;g.body.removeChild(k);return p}}();(function(){function d(d){return function(b){try{d.addColorStop(b.stop,b.color)}catch(a){c.log(["failed to add color stop: ",a,"; tried to add: ",b])}}}var c=h.Util,
b={};h.Generate=b;var g=[/^(-webkit-linear-gradient)\(([a-z\s]+)([\w\d\.\s,%\(\)]+)\)$/,/^(-o-linear-gradient)\(([a-z\s]+)([\w\d\.\s,%\(\)]+)\)$/,/^(-webkit-gradient)\((linear|radial),\s((?:\d{1,3}%?)\s(?:\d{1,3}%?),\s(?:\d{1,3}%?)\s(?:\d{1,3}%?))([\w\d\.\s,%\(\)\-]+)\)$/,/^(-moz-linear-gradient)\(((?:\d{1,3}%?)\s(?:\d{1,3}%?))([\w\d\.\s,%\(\)]+)\)$/,/^(-webkit-radial-gradient)\(((?:\d{1,3}%?)\s(?:\d{1,3}%?)),\s(\w+)\s([a-z\-]+)([\w\d\.\s,%\(\)]+)\)$/,/^(-moz-radial-gradient)\(((?:\d{1,3}%?)\s(?:\d{1,3}%?)),\s(\w+)\s?([a-z\-]*)([\w\d\.\s,%\(\)]+)\)$/,
/^(-o-radial-gradient)\(((?:\d{1,3}%?)\s(?:\d{1,3}%?)),\s(\w+)\s([a-z\-]+)([\w\d\.\s,%\(\)]+)\)$/];b.parseGradient=function(d,b){var a,c,e=g.length,q,f,h,l;for(c=0;c<e&&!(q=d.match(g[c]));c+=1);if(q)switch(q[1]){case "-webkit-linear-gradient":case "-o-linear-gradient":a={type:"linear",x0:null,y0:null,x1:null,y1:null,colorStops:[]};if(e=q[2].match(/\w+/g))for(f=e.length,c=0;c<f;c+=1)switch(e[c]){case "top":a.y0=0;a.y1=b.height;break;case "right":a.x0=b.width;a.x1=0;break;case "bottom":a.y0=b.height;
a.y1=0;break;case "left":a.x0=0,a.x1=b.width}null===a.x0&&null===a.x1&&(a.x0=a.x1=b.width/2);null===a.y0&&null===a.y1&&(a.y0=a.y1=b.height/2);if(e=q[3].match(/((?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\)(?:\s\d{1,3}(?:%|px))?)+/g))for(f=e.length,h=1/Math.max(f-1,1),c=0;c<f;c+=1)l=e[c].match(/((?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\))\s*(\d{1,3})?(%|px)?/),l[2]?(q=parseFloat(l[2]),q="%"===l[3]?q/100:q/b.width):q=c*h,a.colorStops.push({color:l[1],stop:q});break;case "-webkit-gradient":a=
{type:"radial"===q[2]?"circle":q[2],x0:0,y0:0,x1:0,y1:0,colorStops:[]};if(e=q[3].match(/(\d{1,3})%?\s(\d{1,3})%?,\s(\d{1,3})%?\s(\d{1,3})%?/))a.x0=e[1]*b.width/100,a.y0=e[2]*b.height/100,a.x1=e[3]*b.width/100,a.y1=e[4]*b.height/100;if(e=q[4].match(/((?:from|to|color-stop)\((?:[0-9\.]+,\s)?(?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\)\))+/g))for(f=e.length,c=0;c<f;c+=1)l=e[c].match(/(from|to|color-stop)\(([0-9\.]+)?(?:,\s)?((?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\))\)/),
q=parseFloat(l[2]),"from"===l[1]&&(q=0),"to"===l[1]&&(q=1),a.colorStops.push({color:l[3],stop:q});break;case "-moz-linear-gradient":a={type:"linear",x0:0,y0:0,x1:0,y1:0,colorStops:[]};if(e=q[2].match(/(\d{1,3})%?\s(\d{1,3})%?/))a.x0=e[1]*b.width/100,a.y0=e[2]*b.height/100,a.x1=b.width-a.x0,a.y1=b.height-a.y0;if(e=q[3].match(/((?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\)(?:\s\d{1,3}%)?)+/g))for(f=e.length,h=1/Math.max(f-1,1),c=0;c<f;c+=1)l=e[c].match(/((?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\))\s*(\d{1,3})?(%)?/),
l[2]?(q=parseFloat(l[2]),l[3]&&(q/=100)):q=c*h,a.colorStops.push({color:l[1],stop:q});break;case "-webkit-radial-gradient":case "-moz-radial-gradient":case "-o-radial-gradient":a={type:"circle",x0:0,y0:0,x1:b.width,y1:b.height,cx:0,cy:0,rx:0,ry:0,colorStops:[]};if(e=q[2].match(/(\d{1,3})%?\s(\d{1,3})%?/))a.cx=e[1]*b.width/100,a.cy=e[2]*b.height/100;e=q[3].match(/\w+/);l=q[4].match(/[a-z\-]*/);if(e&&l)switch(l[0]){case "farthest-corner":case "cover":case "":c=Math.sqrt(Math.pow(a.cx,2)+Math.pow(a.cy,
2));e=Math.sqrt(Math.pow(a.cx,2)+Math.pow(a.y1-a.cy,2));f=Math.sqrt(Math.pow(a.x1-a.cx,2)+Math.pow(a.y1-a.cy,2));l=Math.sqrt(Math.pow(a.x1-a.cx,2)+Math.pow(a.cy,2));a.rx=a.ry=Math.max(c,e,f,l);break;case "closest-corner":c=Math.sqrt(Math.pow(a.cx,2)+Math.pow(a.cy,2));e=Math.sqrt(Math.pow(a.cx,2)+Math.pow(a.y1-a.cy,2));f=Math.sqrt(Math.pow(a.x1-a.cx,2)+Math.pow(a.y1-a.cy,2));l=Math.sqrt(Math.pow(a.x1-a.cx,2)+Math.pow(a.cy,2));a.rx=a.ry=Math.min(c,e,f,l);break;case "farthest-side":"circle"===e[0]?a.rx=
a.ry=Math.max(a.cx,a.cy,a.x1-a.cx,a.y1-a.cy):(a.type=e[0],a.rx=Math.max(a.cx,a.x1-a.cx),a.ry=Math.max(a.cy,a.y1-a.cy));break;case "closest-side":case "contain":"circle"===e[0]?a.rx=a.ry=Math.min(a.cx,a.cy,a.x1-a.cx,a.y1-a.cy):(a.type=e[0],a.rx=Math.min(a.cx,a.x1-a.cx),a.ry=Math.min(a.cy,a.y1-a.cy))}if(e=q[5].match(/((?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\)(?:\s\d{1,3}(?:%|px))?)+/g))for(f=e.length,h=1/Math.max(f-1,1),c=0;c<f;c+=1)l=e[c].match(/((?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\))\s*(\d{1,3})?(%|px)?/),
l[2]?(q=parseFloat(l[2]),q="%"===l[3]?q/100:q/b.width):q=c*h,a.colorStops.push({color:l[1],stop:q})}return a};b.Gradient=function(c,b){if(0!==b.width&&0!==b.height){var a=n.createElement("canvas"),g=a.getContext("2d"),e,f;a.width=b.width;a.height=b.height;if(e=h.Generate.parseGradient(c,b))switch(e.type){case "linear":f=g.createLinearGradient(e.x0,e.y0,e.x1,e.y1);e.colorStops.forEach(d(f));g.fillStyle=f;g.fillRect(0,0,b.width,b.height);break;case "circle":f=g.createRadialGradient(e.cx,e.cy,0,e.cx,
e.cy,e.rx);e.colorStops.forEach(d(f));g.fillStyle=f;g.fillRect(0,0,b.width,b.height);break;case "ellipse":var r=n.createElement("canvas"),A=r.getContext("2d");f=Math.max(e.rx,e.ry);var l=2*f;r.width=r.height=l;f=A.createRadialGradient(e.rx,e.ry,0,e.rx,e.ry,f);e.colorStops.forEach(d(f));A.fillStyle=f;A.fillRect(0,0,l,l);g.fillStyle=e.colorStops[e.colorStops.length-1].color;g.fillRect(0,0,a.width,a.height);g.drawImage(r,e.cx-e.rx,e.cy-e.ry,2*e.rx,2*e.ry)}return a}};b.ListAlpha=function(b){var c="",
a;do a=b%26,c=String.fromCharCode(a+64)+c,b/=26;while(26<26*b);return c};b.ListRoman=function(b){var c="M CM D CD C XC L XL X IX V IV I".split(" "),a=[1E3,900,500,400,100,90,50,40,10,9,5,4,1],d="",e,f=c.length;if(0>=b||4E3<=b)return b;for(e=0;e<f;e+=1)for(;b>=a[e];)b-=a[e],d+=c[e];return d}})();h.Parse=function(d,c){function b(m,s){var b=parseInt(u(m,s),10);return isNaN(b)?0:b}function g(m,s,b,c,a,d){"transparent"!==d&&(m.setVariable("fillStyle",d),m.fillRect(s,b,c,a))}function k(m,s,b){if(0<m.length)return s+
b.toUpperCase()}function p(m,s){switch(s){case "lowercase":return m.toLowerCase();case "capitalize":return m.replace(/(^|\s|:|-|\(|\))([a-z])/g,k);case "uppercase":return m.toUpperCase();default:return m}}function a(m){return/^(normal|none|0px)$/.test(m)}function v(m,s,b,c){var a=u(s,"fontWeight"),d=u(s,"fontFamily"),e=u(s,"fontSize"),f=w.parseTextShadows(u(s,"textShadow"));switch(parseInt(a,10)){case 401:a="bold";break;case 400:a="normal"}m.setVariable("fillStyle",c);m.setVariable("font",[u(s,"fontStyle"),
u(s,"fontVariant"),a,e,d].join(" "));m.setVariable("textAlign","left");f.length&&(m.setVariable("shadowColor",f[0].color),m.setVariable("shadowOffsetX",f[0].offsetX),m.setVariable("shadowOffsetY",f[0].offsetY),m.setVariable("shadowBlur",f[0].blur));if("none"!==b)return w.Font(d,e,y)}function e(m,s,b){var d=b.ctx,e=u(m,"color"),f=u(m,"textDecoration"),k=u(m,"textAlign"),h,l,q=s,C=0;0<w.trimText(s.nodeValue).length&&(s.nodeValue=p(s.nodeValue,u(m,"textTransform")),k=k.replace(["-webkit-auto"],["auto"]),
l=!c.letterRendering&&/^(left|right|justify|auto)$/.test(k)&&a(u(m,"letterSpacing"))?s.nodeValue.split(/(\b| )/):s.nodeValue.split(""),h=v(d,m,f,e),c.chinese&&l.forEach(function(m,s){/.*[\u4E00-\u9FA5].*$/.test(m)&&(m=m.split(""),m.unshift(s,1),l.splice.apply(l,m))}),l.forEach(function(m,s){var a,c=s<l.length-1;a=b.transform.matrix;var k;if(aa.rangeBounds&&!a){if("none"!==f||0!==w.trimText(m).length)a=q,c=C,k=y.createRange(),k.setStart(a,c),k.setEnd(a,c+m.length),k=k.getBoundingClientRect();C+=m.length}else if(q&&
"string"===typeof q.nodeValue){var c=c?q.splitText(m.length):null,p=q;k=p.parentNode;var n=y.createElement("wrapper"),Z=p.cloneNode(!0);n.appendChild(p.cloneNode(!0));k.replaceChild(n,p);a=a?w.OffsetBounds(n):w.Bounds(n);k.replaceChild(Z,n);k=a;q=c}if(a=k)switch(c=a.left,k=a.bottom,null!==m&&0<w.trimText(m).length&&d.fillText(m,c,k),f){case "underline":g(d,a.left,Math.round(a.top+h.baseline+h.lineWidth),a.width,1,e);break;case "overline":g(d,a.left,Math.round(a.top),a.width,1,e);break;case "line-through":g(d,
a.left,Math.ceil(a.top+h.middle+h.lineWidth),a.width,1,e)}}))}function q(m,s,a){var b;s=s.ctx;var c=u(m,"listStyleType");if(/^(decimal|decimal-leading-zero|upper-alpha|upper-latin|upper-roman|lower-alpha|lower-greek|lower-latin|lower-roman)$/i.test(c)){var d;d=-1;var e=1,f=m.parentNode.childNodes;if(m.parentNode){for(;f[++d]!==m;)1===f[d].nodeType&&e++;d=e}else d=-1;switch(c){case "decimal":b=d;break;case "decimal-leading-zero":b=1===d.toString().length?"0"+d.toString():d.toString();break;case "upper-roman":b=
h.Generate.ListRoman(d);break;case "lower-roman":b=h.Generate.ListRoman(d).toLowerCase();break;case "lower-alpha":b=h.Generate.ListAlpha(d).toLowerCase();break;case "upper-alpha":b=h.Generate.ListAlpha(d)}b+=". ";d=y.createElement("boundelement");d.style.display="inline";e=m.style.listStyleType;m.style.listStyleType="none";d.appendChild(y.createTextNode(b));m.insertBefore(d,m.firstChild);c=w.Bounds(d);m.removeChild(d);m.style.listStyleType=e;v(s,m,"none",u(m,"color"));"inside"===u(m,"listStylePosition")&&
(s.setVariable("textAlign","left"),m=a.left,a=c.bottom,null!==b&&0<w.trimText(b).length&&s.fillText(b,m,a))}}function z(m){return(m=d[m])&&!0===m.succeeded?m.img:!1}function A(m,s){var b=Math.max(m.left,s.left),a=Math.max(m.top,s.top),d=Math.min(m.left+m.width,s.left+s.width),c=Math.min(m.top+m.height,s.top+s.height);return{left:b,top:a,width:d-b,height:c-a}}function l(m,s,a,d,c){var e=b(s,"paddingLeft"),f=b(s,"paddingTop"),g=b(s,"paddingRight");s=b(s,"paddingBottom");t(m,a,0,0,a.width,a.height,d.left+
e+c[3].width,d.top+f+c[0].width,d.width-(c[1].width+c[3].width+e+g),d.height-(c[0].width+c[2].width+f+s))}function Q(m){return["Top","Right","Bottom","Left"].map(function(a){return{width:b(m,"border"+a+"Width"),color:u(m,"border"+a+"Color")}})}function G(m){return["TopLeft","TopRight","BottomRight","BottomLeft"].map(function(a){return u(m,"border"+a+"Radius")})}function E(m,a,b,d){var c=function(m,a,b){return{x:m.x+(a.x-m.x)*b,y:m.y+(a.y-m.y)*b}};return{start:m,startControl:a,endControl:b,end:d,subdivide:function(e){var f=
c(m,a,e),g=c(a,b,e),k=c(b,d,e),h=c(f,g,e),g=c(g,k,e);e=c(h,g,e);return[E(m,f,h,e),E(e,g,k,d)]},curveTo:function(m){m.push(["bezierCurve",a.x,a.y,b.x,b.y,d.x,d.y])},curveToReversed:function(d){d.push(["bezierCurve",b.x,b.y,a.x,a.y,m.x,m.y])}}}function F(m,a,b,d,c,e,f){0<a[0]||0<a[1]?(m.push(["line",d[0].start.x,d[0].start.y]),d[0].curveTo(m),d[1].curveTo(m)):m.push(["line",e,f]);(0<b[0]||0<b[1])&&m.push(["line",c[0].start.x,c[0].start.y])}function B(m,a,b,d,c,e,f){var g=[];0<a[0]||0<a[1]?(g.push(["line",
d[1].start.x,d[1].start.y]),d[1].curveTo(g)):g.push(["line",m.c1[0],m.c1[1]]);0<b[0]||0<b[1]?(g.push(["line",e[0].start.x,e[0].start.y]),e[0].curveTo(g),g.push(["line",f[0].end.x,f[0].end.y]),f[0].curveToReversed(g)):(g.push(["line",m.c2[0],m.c2[1]]),g.push(["line",m.c3[0],m.c3[1]]));0<a[0]||0<a[1]?(g.push(["line",c[1].end.x,c[1].end.y]),c[1].curveToReversed(g)):g.push(["line",m.c4[0],m.c4[1]]);return g}function D(m,a,b){var d,c,e,f,g,k,h,l,p=a.left,q=a.top,n=a.width,C=a.height,t,v,r,I,x=G(m);l=a.left;
t=a.top;k=a.width;h=a.height;c=x[0][0];e=x[0][1];f=x[1][0];g=x[1][1];var w=x[2][0],E=x[2][1];v=x[3][0];r=x[3][1];var A=k-f,z=h-E,y=k-w,K=h-r;d=H(l,t,c,e).topLeft.subdivide(.5);c=H(l+b[3].width,t+b[0].width,Math.max(0,c-b[3].width),Math.max(0,e-b[0].width)).topLeft.subdivide(.5);e=H(l+A,t,f,g).topRight.subdivide(.5);f=H(l+Math.min(A,k+b[3].width),t+b[0].width,A>k+b[3].width?0:f-b[3].width,g-b[0].width).topRight.subdivide(.5);g=H(l+y,t+z,w,E).bottomRight.subdivide(.5);k=H(l+Math.min(y,k+b[3].width),
t+Math.min(z,h+b[0].width),Math.max(0,w-b[1].width),Math.max(0,E-b[2].width)).bottomRight.subdivide(.5);h=H(l,t+K,v,r).bottomLeft.subdivide(.5);l=H(l+b[3].width,t+K,Math.max(0,v-b[3].width),Math.max(0,r-b[2].width)).bottomLeft.subdivide(.5);t=[];switch(u(m,"backgroundClip")){case "content-box":case "padding-box":F(t,x[0],x[1],c,f,a.left+b[3].width,a.top+b[0].width);F(t,x[1],x[2],f,k,a.left+a.width-b[1].width,a.top+b[0].width);F(t,x[2],x[3],k,l,a.left+a.width-b[1].width,a.top+a.height-b[2].width);
F(t,x[3],x[0],l,c,a.left+b[3].width,a.top+a.height-b[2].width);break;default:F(t,x[0],x[1],d,e,a.left,a.top),F(t,x[1],x[2],e,g,a.left+a.width,a.top),F(t,x[2],x[3],g,h,a.left+a.width,a.top+a.height),F(t,x[3],x[0],h,d,a.left,a.top+a.height)}K={clip:t,borders:[]};for(m=0;4>m;m++)if(0<b[m].width){a=p;t=q;v=n;r=C-b[2].width;switch(m){case 0:r=b[0].width;I=B({c1:[a,t],c2:[a+v,t],c3:[a+v-b[1].width,t+r],c4:[a+b[3].width,t+r]},x[0],x[1],d,c,e,f);break;case 1:a=p+n-b[1].width;v=b[1].width;I=B({c1:[a+v,t],
c2:[a+v,t+r+b[2].width],c3:[a,t+r],c4:[a,t+b[0].width]},x[1],x[2],e,f,g,k);break;case 2:t=t+C-b[2].width;r=b[2].width;I=B({c1:[a+v,t+r],c2:[a,t+r],c3:[a+b[3].width,t],c4:[a+v-b[3].width,t]},x[2],x[3],g,k,h,l);break;case 3:v=b[3].width,I=B({c1:[a,t+r+b[2].width],c2:[a,t],c3:[a+v,t+b[0].width],c4:[a+v,t+r]},x[3],x[0],h,l,d,c)}K.borders.push({args:I,color:b[m].color})}return K}function J(a,b){var d=a.drawShape();b.forEach(function(a,b){d[0===b?"moveTo":a[0]+"To"].apply(null,a.slice(1))});return d}function C(a,
b,d){var c=y.createElement("valuewrap");"lineHeight textAlign fontFamily color fontSize paddingLeft paddingTop width height border borderLeftWidth borderTopWidth".split(" ").forEach(function(b){try{c.style[b]=u(a,b)}catch(d){w.log("html2canvas: Parse: Exception caught in renderFormValue: "+d.message)}});c.style.borderColor="black";c.style.borderStyle="solid";c.style.display="block";c.style.position="absolute";if(/^(submit|reset|button|text|password)$/.test(a.type)||"SELECT"===a.nodeName)c.style.lineHeight=
u(a,"height");c.style.top=b.top+"px";c.style.left=b.left+"px";b="SELECT"===a.nodeName?(a.options[a.selectedIndex]||0).text:a.value;b||(b=a.placeholder);b=y.createTextNode(b);c.appendChild(b);O.appendChild(c);e(a,b,d);O.removeChild(c)}function t(a){a.drawImage.apply(a,Array.prototype.slice.call(arguments,1))}function I(a,b){var c=f.getComputedStyle(a,b);if(c&&c.content&&"none"!==c.content&&"-moz-alt-content"!==c.content&&"none"!==c.display){var d=c.content+"",e=d.substr(0,1);e===d.substr(d.length-
1)&&e.match(/'|"/)&&(d=d.substr(1,d.length-2));var e="url"===d.substr(0,3),g=n.createElement(e?"img":"span");g.className="___html2canvas___pseudoelement-before ___html2canvas___pseudoelement-after";Object.keys(c).filter(K).forEach(function(a){try{g.style[a]=c[a]}catch(b){w.log(["Tried to assign readonly property ",a,"Error:",b])}});e?g.src=w.parseBackgroundImage(d)[0].args[0]:g.innerHTML=d;return g}}function K(a){return isNaN(f.parseInt(a,10))}function ba(a,b){var d=I(a,":before"),c=I(a,":after");
if(d||c)d&&(a.className+=" ___html2canvas___pseudoelement-before",a.parentNode.insertBefore(d,a),R(d,b,!0),a.parentNode.removeChild(d),a.className=a.className.replace("___html2canvas___pseudoelement-before","").trim()),c&&(a.className+=" ___html2canvas___pseudoelement-after",a.appendChild(c),R(c,b,!0),a.removeChild(c),a.className=a.className.replace("___html2canvas___pseudoelement-after","").trim())}function U(a,b,d,c){var e=Math.round(c.left+d.left);d=Math.round(c.top+d.top);a.createPattern(b);a.translate(e,
d);a.fill();a.translate(-e,-d)}function S(a,b,d,c,e,f,g,k){var h=[];h.push(["line",Math.round(e),Math.round(f)]);h.push(["line",Math.round(e+g),Math.round(f)]);h.push(["line",Math.round(e+g),Math.round(k+f)]);h.push(["line",Math.round(e),Math.round(k+f)]);J(a,h);a.save();a.clip();U(a,b,d,c);a.restore()}function L(a,b,d){for(var c=u(a,"backgroundImage"),e=w.parseBackgroundImage(c),f,g=e.length;g--;)if(c=e[g],c.args&&0!==c.args.length)if(f=z("url"===c.method?c.args[0]:c.value)){var k=a,c=b,h=d,l=f;
f=g;var p=w.BackgroundSize(k,c,l,f),q=w.BackgroundPosition(k,c,l,f,p),k=u(k,"backgroundRepeat").split(",").map(w.trimText);if(l.width!==p.width||l.height!==p.height){var n=void 0,C=y.createElement("canvas");C.width=p.width;C.height=p.height;n=C.getContext("2d");t(n,l,0,0,l.width,l.height,0,0,p.width,p.height);l=C}k=k[f]||k[0];switch(k){case "repeat-x":S(h,l,q,c,c.left,c.top+q.top,99999,l.height);break;case "repeat-y":S(h,l,q,c,c.left+q.left,c.top,l.width,99999);break;case "no-repeat":S(h,l,q,c,c.left+
q.left,c.top+q.top,l.width,l.height);break;default:U(h,l,q,{top:c.top,left:c.left,width:l.width,height:l.height})}}else w.log("html2canvas: Error loading background:",c)}function M(a){return a.replace("px","")}function N(a,b){var c=u(a,"transform")||u(a,"-webkit-transform")||u(a,"-moz-transform")||u(a,"-ms-transform")||u(a,"-o-transform"),d=u(a,"transform-origin")||u(a,"-webkit-transform-origin")||u(a,"-moz-transform-origin")||u(a,"-ms-transform-origin")||u(a,"-o-transform-origin")||"0px 0px",d=d.split(" ").map(M).map(w.asFloat),
e;if(c&&"none"!==c&&(c=c.match(ca)))switch(c[1]){case "matrix":e=c[2].split(",").map(w.trimText).map(w.asFloat)}return{origin:d,matrix:e}}function da(a,b,d,e){var f=Y(b?d.width:Math.max(Math.max(y.body.scrollWidth,y.documentElement.scrollWidth),Math.max(y.body.offsetWidth,y.documentElement.offsetWidth),Math.max(y.body.clientWidth,y.documentElement.clientWidth)),b?d.height:Math.max(Math.max(y.body.scrollHeight,y.documentElement.scrollHeight),Math.max(y.body.offsetHeight,y.documentElement.offsetHeight),
Math.max(y.body.clientHeight,y.documentElement.clientHeight))),g;g=f.setVariable("globalAlpha",u(a,"opacity")*(b?b.opacity:1));e={ctx:f,opacity:g,cssPosition:u(a,"position"),borders:Q(a),transform:e,clip:b&&b.clip?w.Extend({},b.clip):null};var k=(g="static"!==e.cssPosition)?u(a,"zIndex"):"auto",l=u(a,"opacity"),h="none"!==u(a,"cssFloat");e.zIndex=f={zindex:k,children:[]};f.isPositioned=g;f.isFloated=h;f.opacity=l;f.ownStacking="auto"!==k||1>l;b&&b.zIndex.children.push(e);!0===c.useOverflow&&!0===
/(hidden|scroll|auto)/.test(u(a,"overflow"))&&!1===/(BODY)/i.test(a.nodeName)&&(e.clip=e.clip?A(e.clip,d):d);return e}function ea(a,b,c){a={left:b.left+a[3].width,top:b.top+a[0].width,width:b.width-(a[1].width+a[3].width),height:b.height-(a[0].width+a[2].width)};c&&(a=A(a,c));return a}function fa(a,b){var c=b.matrix?w.OffsetBounds(a):w.Bounds(a);b.origin[0]+=c.left;b.origin[1]+=c.top;return c}function V(a,b,c,d){var e=N(a,b),f=fa(a,e),k;b=da(a,b,f,e);var e=b.borders,h=b.ctx,p=ea(e,f,b.clip),t=D(a,
f,e),n=W.test(a.nodeName)?"#efefef":u(a,"backgroundColor");J(h,t.clip);h.save();h.clip();0<p.height&&0<p.width&&!d?(g(h,f.left,f.top,f.width,f.height,n),L(a,p,h)):d&&(b.backgroundColor=n);h.restore();t.borders.forEach(function(a){var b=a.args;a=a.color;"transparent"!==a&&(h.setVariable("fillStyle",a),J(h,b),h.fill())});c||ba(a,b);switch(a.nodeName){case "IMG":(k=z(a.getAttribute("src")))?l(h,a,k,f,e):w.log("html2canvas: Error loading <img>:"+a.getAttribute("src"));break;case "INPUT":/^(text|url|email|submit|button|reset)$/.test(a.type)&&
0<(a.value||a.placeholder||"").length&&C(a,f,b);break;case "TEXTAREA":0<(a.value||a.placeholder||"").length&&C(a,f,b);break;case "SELECT":0<(a.options||a.placeholder||"").length&&C(a,f,b);break;case "LI":q(a,b,p);break;case "CANVAS":l(h,a,a,f,e)}return b}function R(a,b,c){"none"===u(a,"display")||"hidden"===u(a,"visibility")||a.hasAttribute("data-html2canvas-ignore")||(b=V(a,b,c,!1)||b,W.test(a.nodeName)||X(a,b,c))}function X(a,b,c){w.Children(a).forEach(function(d){d.nodeType===d.ELEMENT_NODE?R(d,
b,c):d.nodeType===d.TEXT_NODE&&e(a,d,b)})}f.scroll(0,0);var P=c.elements===r?n.body:c.elements[0],y=P.ownerDocument,w=h.Util,aa=w.Support(c,y),W=new RegExp("("+c.ignoreElements+")"),O=y.body,u=w.getCSS,T=y.createElement("style");T.innerHTML='.___html2canvas___pseudoelement-before:before { content: "" !important; display: none !important; }.___html2canvas___pseudoelement-after:after { content: "" !important; display: none !important; }';O.appendChild(T);d=d||{};var H=function(a){return function(b,
c,d,e){var f=d*a,g=e*a;d=b+d;e=c+e;return{topLeft:E({x:b,y:e},{x:b,y:e-g},{x:d-f,y:c},{x:d,y:c}),topRight:E({x:b,y:c},{x:b+f,y:c},{x:d,y:e-g},{x:d,y:e}),bottomRight:E({x:d,y:c},{x:d,y:c+g},{x:b+f,y:e},{x:b,y:e}),bottomLeft:E({x:d,y:e},{x:d-f,y:e},{x:b,y:c+g},{x:b,y:c})}}}(4*((Math.sqrt(2)-1)/3)),ca=/(matrix)\((.+)\)/;return function(){var a=u(n.documentElement,"backgroundColor"),b=w.isTransparent(a)&&P===n.body,c=V(P,null,!1,b);X(P,c);b&&(a=c.backgroundColor);O.removeChild(T);return{backgroundColor:a,
stack:c}}()};h.Preload=function(d){function c(){z.log("html2canvas: start: images: "+e.numLoaded+" / "+e.numTotal+" (failed: "+e.numFailed+")");!e.firstRun&&e.numLoaded>=e.numTotal&&(z.log("Finished loading images: # "+e.numTotal+" (failed: "+e.numFailed+")"),"function"===typeof d.complete&&d.complete(e))}function b(a,b,g){var k,h=d.proxy,l;B.href=a;a=B.href;k="html2canvas_"+Q++;g.callbackname=k;h=-1<h.indexOf("?")?h+"&":h+"?";h+="url="+encodeURIComponent(a)+"&callback="+k;l=G.createElement("script");
f[k]=function(a){"error:"===a.substring(0,6)?(g.succeeded=!1,e.numLoaded++,e.numFailed++,c()):(v(b,g),b.src=a);f[k]=r;try{delete f[k]}catch(d){}l.parentNode.removeChild(l);l=null;delete g.script;delete g.callbackname};l.setAttribute("type","text/javascript");l.setAttribute("src",h);g.script=l;f.document.body.appendChild(l)}function g(a,b){var c=f.getComputedStyle(a,b),d=c.content;"url"===d.substr(0,3)&&A.loadImage(h.Util.parseBackgroundImage(d)[0].args[0]);p(c.backgroundImage,a)}function k(a){return a&&
a.method&&a.args&&0<a.args.length}function p(a,b){var d;h.Util.parseBackgroundImage(a).filter(k).forEach(function(a){if("url"===a.method)A.loadImage(a.args[0]);else if(a.method.match(/\-?gradient$/)){d===r&&(d=h.Util.Bounds(b));a=a.value;var f=h.Generate.Gradient(a,d);f!==r&&(e[a]={img:f,succeeded:!0},e.numTotal++,e.numLoaded++,c())}})}function a(b){var c=!1;try{z.Children(b).forEach(a)}catch(d){}try{c=b.nodeType}catch(e){c=!1,z.log("html2canvas: failed to access some element's nodeType - Exception: "+
e.message)}if(1===c||c===r){g(b,":before");g(b,":after");try{p(z.getCSS(b,"backgroundImage"),b)}catch(f){z.log("html2canvas: failed to get background-image - Exception: "+f.message)}p(b)}}function v(a,g){a.onload=function(){g.timer!==r&&f.clearTimeout(g.timer);e.numLoaded++;g.succeeded=!0;a.onerror=a.onload=null;c()};a.onerror=function(){if("anonymous"===a.crossOrigin&&(f.clearTimeout(g.timer),d.proxy)){var k=a.src;a=new Image;g.img=a;a.src=k;b(a.src,a,g);return}e.numLoaded++;e.numFailed++;g.succeeded=
!1;a.onerror=a.onload=null;c()}}var e={numLoaded:0,numFailed:0,numTotal:0,cleanupDone:!1},q,z=h.Util,A,l,Q=0;l=d.elements[0]||n.body;var G=l.ownerDocument,E=l.getElementsByTagName("img"),F=E.length,B=G.createElement("a"),D=function(a){return a.crossOrigin!==r}(new Image),J;B.href=f.location.href;q=B.protocol+B.host;A={loadImage:function(a){var c,f;a&&e[a]===r&&(c=new Image,a.match(/data:image\/.*;base64,/i)?(c.src=a.replace(/url\(['"]{0,}|['"]{0,}\)$/ig,""),f=e[a]={img:c},e.numTotal++,v(c,f)):(B.href=
a,B.href=B.href,B.protocol+B.host===q||!0===d.allowTaint?(f=e[a]={img:c},e.numTotal++,v(c,f),c.src=a):D&&!d.allowTaint&&d.useCORS?(c.crossOrigin="anonymous",f=e[a]={img:c},e.numTotal++,v(c,f),c.src=a):d.proxy&&(f=e[a]={img:c},e.numTotal++,b(a,c,f))))},cleanupDOM:function(a){var b,g;if(!e.cleanupDone){a&&"string"===typeof a?z.log("html2canvas: Cleanup because: "+a):z.log("html2canvas: Cleanup after timeout: "+d.timeout+" ms.");for(g in e)if(e.hasOwnProperty(g)&&(b=e[g],"object"===typeof b&&b.callbackname&&
b.succeeded===r)){f[b.callbackname]=r;try{delete f[b.callbackname]}catch(k){}b.script&&b.script.parentNode&&(b.script.setAttribute("src","about:blank"),b.script.parentNode.removeChild(b.script));e.numLoaded++;e.numFailed++;z.log("html2canvas: Cleaned up failed img: '"+g+"' Steps: "+e.numLoaded+" / "+e.numTotal)}f.stop!==r?f.stop():n.execCommand!==r&&n.execCommand("Stop",!1);n.close!==r&&n.close();e.cleanupDone=!0;a&&"string"===typeof a||c()}},renderingDone:function(){J&&f.clearTimeout(J)}};0<d.timeout&&
(J=f.setTimeout(A.cleanupDOM,d.timeout));z.log("html2canvas: Preload starts: finding background-images");e.firstRun=!0;a(l);z.log("html2canvas: Preload: Finding images");for(l=0;l<F;l+=1)A.loadImage(E[l].getAttribute("src"));e.firstRun=!1;z.log("html2canvas: Preload: Done.");e.numTotal===e.numLoaded&&c();return A};h.Renderer=function(d,c){return function(b){if("string"===typeof c.renderer&&h.Renderer[b]!==r)b=h.Renderer[b](c);else if("function"===typeof b)b=b(c);else throw Error("Unknown renderer");
if("function"!==typeof b)throw Error("Invalid renderer defined");return b}(c.renderer)(d,c,n,function(b){function c(b){Object.keys(b).sort().forEach(function(a){var f=[],e=[],h=[],n=[];b[a].forEach(function(a){a.node.zIndex.isPositioned||1>a.node.zIndex.opacity?h.push(a):a.node.zIndex.isFloated?e.push(a):f.push(a)});(function l(a){a.forEach(function(a){n.push(a);a.children&&l(a.children)})})(f.concat(e,h));n.forEach(function(a){a.context?c(a.context):d.push(a.node)})})}var d=[];b=function(b){function a(b,
c,d){var f="auto"===c.zIndex.zindex?0:Number(c.zIndex.zindex),g=b,k=c.zIndex.isPositioned,h=c.zIndex.isFloated,p={node:c},n=d;if(c.zIndex.ownStacking)g=p.context={"!":[{node:c,children:[]}]},n=r;else if(k||h)n=p.children=[];0===f&&d?d.push(p):(b[f]||(b[f]=[]),b[f].push(p));c.zIndex.children.forEach(function(b){a(g,b,n)})}var c={};a(c,b);return c}(b);c(b);return d}(d.stack),h)};h.Util.Support=function(d,c){function b(){var b=new Image,d=c.createElement("canvas"),f=d.getContext===r?!1:d.getContext("2d");
if(!1===f)return!1;d.width=d.height=10;b.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' width='10' height='10'><foreignObject width='10' height='10'><div xmlns='http://www.w3.org/1999/xhtml' style='width:10;height:10;'>sup</div></foreignObject></svg>";try{f.drawImage(b,0,0),d.toDataURL()}catch(a){return!1}h.Util.log("html2canvas: Parse: SVG powered rendering available");return!0}return{rangeBounds:function(){var b,d,f=!1;c.createRange&&(b=c.createRange(),b.getBoundingClientRect&&
(d=c.createElement("boundtest"),d.style.height="123px",d.style.display="block",c.body.appendChild(d),b.selectNode(d),b=b.getBoundingClientRect(),b=b.height,123===b&&(f=!0),c.body.removeChild(d)));return f}(),svgRendering:d.svgRendering&&b()}};f.html2canvas=function(d,c){d=d.length?d:[d];var b,g,k={logging:!1,elements:d,background:"#fff",proxy:null,timeout:0,useCORS:!1,allowTaint:!1,svgRendering:!1,ignoreElements:"IFRAME|OBJECT|PARAM",useOverflow:!0,letterRendering:!1,chinese:!1,width:null,height:null,
taintTest:!0,renderer:"Canvas"},k=h.Util.Extend(c,k);h.logging=k.logging;k.complete=function(c){if("function"!==typeof k.onpreloaded||!1!==k.onpreloaded(c))if(b=h.Parse(c,k),"function"!==typeof k.onparsed||!1!==k.onparsed(b))if(g=h.Renderer(b,k),"function"===typeof k.onrendered)k.onrendered(g)};f.setTimeout(function(){h.Preload(k)},0);return{render:function(b,a){return h.Renderer(b,h.Util.Extend(a,k))},parse:function(b,a){return h.Parse(b,h.Util.Extend(a,k))},preload:function(b){return h.Preload(h.Util.Extend(b,
k))},log:h.Util.log}};f.html2canvas.log=h.Util.log;f.html2canvas.Renderer={Canvas:r};h.Renderer.Canvas=function(d){function c(a,b){a.beginPath();b.forEach(function(b){a[b.name].apply(a,b.arguments)});a.closePath()}d=d||{};var b=[],f=n.createElement("canvas"),k=f.getContext("2d"),p=h.Util,a=d.canvas||n.createElement("canvas");return function(h,e,q,z,A){var l=a.getContext("2d"),D,G=h.stack;a.width=a.style.width=e.width||G.ctx.width;a.height=a.style.height=e.height||G.ctx.height;D=l.fillStyle;l.fillStyle=
p.isTransparent(G.backgroundColor)&&e.background!==r?e.background:h.backgroundColor;l.fillRect(0,0,a.width,a.height);l.fillStyle=D;z.forEach(function(a){l.textBaseline="bottom";l.save();a.transform.matrix&&(l.translate(a.transform.origin[0],a.transform.origin[1]),l.transform.apply(l,a.transform.matrix),l.translate(-a.transform.origin[0],-a.transform.origin[1]));a.clip&&(l.beginPath(),l.rect(a.clip.left,a.clip.top,a.clip.width,a.clip.height),l.clip());a.ctx.storage&&a.ctx.storage.forEach(function(a){var e=
l;switch(a.type){case "variable":e[a.name]=a.arguments;break;case "function":switch(a.name){case "createPattern":if(0<a.arguments[0].width&&0<a.arguments[0].height)try{e.fillStyle=e.createPattern(a.arguments[0],"repeat")}catch(h){p.log("html2canvas: Renderer: Error creating pattern",h.message)}break;case "drawShape":c(e,a.arguments);break;case "drawImage":if(0<a.arguments[8]&&0<a.arguments[7]){var q;if(!(q=!d.taintTest)&&(q=d.taintTest))a:{if(-1===b.indexOf(a.arguments[0].src)){k.drawImage(a.arguments[0],
0,0);try{k.getImageData(0,0,1,1)}catch(r){f=n.createElement("canvas");k=f.getContext("2d");q=!1;break a}b.push(a.arguments[0].src)}q=!0}q&&e.drawImage.apply(e,a.arguments)}break;default:e[a.name].apply(e,a.arguments)}}});l.restore()});p.log("html2canvas: Renderer: Canvas renderer done - returning canvas obj");return 1===e.elements.length&&"object"===typeof e.elements[0]&&"BODY"!==e.elements[0].nodeName?(h=A.Util.Bounds(e.elements[0]),q=q.createElement("canvas"),q.width=Math.ceil(h.width),q.height=
Math.ceil(h.height),l=q.getContext("2d"),l.drawImage(a,h.left,h.top,h.width,h.height,0,0,h.width,h.height),a=null,q):a}}})(window,document);
